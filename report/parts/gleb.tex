\section{Часть Глеба}

Основной задачей являлось создание библиотеки для обработки жестов, с помощью которой можно обучать модель и распознавать движения. Все наработки находились в Jupyter файлах, поэтому было необходимо все перенести все в Python файлы, объединить и "причесать" код. \newline

Так как наше мобильное приложение сделано с помощью JavaScript, а все основные алгоритмы – с помощью Python, то было принято решение сделать следующее: разработать библиотеку с помощью JavaScript, которая предоставляет интерфейс для обучения и предсказания движения, а внутри эта библиотека общается с Python сервером с помощью протокола http, на котором уже происходят все вычисления.

\subsection{JavaScript Library}
У JavaScript библиотеки определены следующие классы:
\begin{itemize}
  \item GestureData. Данный класс характеризует данные, полученные с устройства.
  \item Gesture. Данный класс характеризует распознанный жест.
\end{itemize}
В класссе Gesture содержится информация о жесте:
\begin{itemize}
  \item name -- класс, к которому он принадлежит (круг, квадрат, встряска и т.д.)
  \item 2dProjection -- 2-мерная проекция движения в плоскости
  \item 3dProjection -- 3-мерное движение в пространстве
  \item gestureData -- данные с акселерометра и гироскопа
\end{itemize}

У JavaScript библиотеки определены следующие методы:
\begin{itemize}
  \item train(name: String, gesture: GestureData): Promise<null> {} 
  \item predict(gesture: GestureData): Promise<Gesture> {}
\end{itemize}
Эти методы сериализуют переданные аргументы в JSON формат и отправляют их на Python сервер.


\subsection{Python Server}
Основная обработка данных происходит на серверной части.

Вне зависимости от того, на какой эндпоинт пришел запрос, сервер всегда обрабатывает GestureData:
\begin{itemize}
  \item в первую очередь данные акселерометра фильтруются и сглаживаются (см. часть Фархата),
  \item после этого, показания акселерометра компенсируются, основываясь на данных гироскопа (см. часть Артема Самарина),
  \item затем, выделяются такты и ищется усредненное движение (см. часть Влада),
  \item далее, полагая, что движение совершается в какой-то двумерной плоскости, находится наилучшая плоскость, внутри которой которой уже происходит поиск и классификация движения.
\end{itemize}

На сервере предусмотрены следующее эндпоинты:
\begin{itemize}
  \item (POST) /train (name: String, gesture: GestrureData). При получении этого запроса, происходит обучение модели на основе полученного усредненного движения в плоскости, полагая, что данное движение соответсвует классу name (см. часть Артем Савосина) и при успешном обучении возвращается сообщение о успехе.

  \item (POST) /predict (gesture: GestureData). При получении этого запроса происходит классификация движения на основе существующей модели (см. часть Арема Савосина) и возвращается Gesture, в котором содержится класс и движение в плоскости и пространстве.
\end{itemize}

\subsection{Ссылка на библиотеку}
https://github.com/kaikash/hse-study-project